<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Stroy Market - –ü—Ä–µ–º–∏—É–º</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      text-align: center;
      background: #f9f9f9;
    }
    h1 {
      color: #28a745;
    }
    .form, .promo-form {
      background: white;
      margin: 20px auto;
      padding: 20px;
      max-width: 600px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 8px;
    }
    input, textarea, button {
      width: 90%;
      margin: 10px auto;
      padding: 10px;
      font-size: 16px;
    }
    button {
      background: #28a745;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    button:hover {
      background: #218838;
    }
  </style>
</head>
<body>

  <h1>üéâ –ü—Ä–µ–º–∏—É–º –¥–æ—Å—Ç—É–ø</h1>
  <p id="welcome-msg" style="display:none;">–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º —Å–∞–π—Ç–∞.</p>

  <!-- –§–æ—Ä–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞ -->
  <div class="promo-form" id="promo-section">
    <h3>–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏</h3>
    <input type="text" id="promo-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
    <button onclick="checkPromo()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
  <div class="form" id="main-form" style="display:none;">
    <h3>–§–æ—Ä–º–∞ –∑–∞–ø—Ä–æ—Å–∞ PDF-–¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–± –æ—Ç–ø—É—Å–∫–µ</h3>
    <input type="text" id="name" placeholder="–§–ò–û" required>
    <input type="email" id="email" placeholder="Email" required>
    <input type="tel" id="phone" placeholder="–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" required>
    <textarea id="reason" rows="4" placeholder="–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–ø—É—Å–∫–∞" required></textarea>
    <button onclick="generatePDF()">–°–∫–∞—á–∞—Ç—å PDF</button>
  </div>

  <!-- jsPDF –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    const correctPromo = "25Somoni25";

    function checkPromo() {
      const promoInput = document.getElementById("promo-input").value.trim();
      if (promoInput === correctPromo) {
        alert("‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–Ω—è—Ç! –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ü—Ä–µ–º–∏—É–º.");
        document.getElementById("promo-section").style.display = "none";
        document.getElementById("main-form").style.display = "block";
        document.getElementById("welcome-msg").style.display = "block";
      } else {
        alert("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –ø—Ä–æ–º–æ–∫–æ–¥. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.");
      }
    }

    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const name = document.getElementById("name").value;
      const email = document.getElementById("email").value;
      const phone = document.getElementById("phone").value;
      const reason = document.getElementById("reason").value;

      doc.setFontSize(16);
      doc.text("–ó–∞—è–≤–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–ø—É—Å–∫", 20, 20);
      doc.setFontSize(12);
      doc.text(`–§–ò–û: ${name}`, 20, 40);
      doc.text(`Email: ${email}`, 20, 50);
      doc.text(`–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}`, 20, 60);
      doc.text("–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–ø—É—Å–∫–∞:", 20, 70);

      const lines = doc.splitTextToSize(reason, 170);
      doc.text(lines, 20, 80);

      doc.save("otpusk.pdf");
    }
  </script>
</body>
</html>
